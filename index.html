<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SQUARE WARS</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css?v=14" />
  </head>
  <body>
    <!-- Mode Select Modal -->
    <div id="modeSelectModal" class="modal-overlay" aria-hidden="false">
      <div class="modal">
        <h2>Choose Game Mode</h2>
        <p>Select how you want to play SQUARE WARS:</p>
               <button class="single-player" data-mode="single">
          ğŸ”´ Single Player<br /><small>vs Computer</small>
        </button>
        <button data-mode="multi">
          ğŸ”µ Multiplayer<br /><small>2 Players</small>
        </button>
      </div>
    </div>

    <!-- Scoring Select Modal -->
    <div
      id="scoringSelectModal"
      class="modal-overlay hidden"
      aria-hidden="true"
    >
      <div class="modal">
        <h2>Choose Scoring Style</h2>

             <button class="classic-mode" data-scoring="classic">
          ğŸ§± Classic (Box Points)<br />
          <small>Each captured box is worth <strong>1 point</strong>.</small>
        </button>

        <button class="area-mode" data-scoring="area">
                 ğŸ—ºï¸ Territory Takedown (Area Mode)<br />
          <small
            >Score the <strong>number of squares</strong> inside a captured
            zone. Overlaps can <strong>steal</strong> territory!</small
          >
        </button>

        <!-- Quick Fire goes to its own screen -->
        <button class="quickfire-mode" data-scoring="quickfire">
          âš¡ Quick Fire<br />
          <small>Classic scoring with a win target.</small>
        </button>
      </div>
    </div>

    <!-- Quick Fire target modal -->
    <div
      id="quickfireSelectModal"
      class="modal-overlay hidden"
      aria-hidden="true"
    >
      <div class="modal">
        <h2>Quick Fire â€” Set Win Target</h2>
        <p>Choose how many boxes a player needs to win the match.</p>

        <div class="qf-chooser">
          <label for="qfTarget">Target</label>

          <!-- Range + live bubble -->
          <div class="qf-range-wrap">
            <div id="qfBubble" class="qf-bubble">5</div>
                     <input
              type="range"
              id="qfTarget"
              min="1"
              max="10"
              step="1"
              value="5"
            />
          </div>
        </div>

        <div class="qf-actions">
          <button class="qf-start" data-action="qf-start">Start</button>
          <button class="qf-cancel" data-action="qf-cancel">Back</button>
        </div>
      </div>
    </div>

    <!-- Difficulty Select Modal -->
    <div
      id="difficultySelectModal"
      class="modal-overlay hidden"
      aria-hidden="true"
    >
      <div class="modal">
        <h2>Choose Difficulty</h2>
        <p>Select the AI difficulty level:</p>
 <button class="beginner" data-difficulty="beginner">
          ğŸŸ¢ Beginner<br /><small>Fast & Friendly</small>
        </button>
        <button class="medium" data-difficulty="medium">
          ğŸŸ¡ Medium<br /><small>Balanced Challenge</small>
        </button>
        <button class="advanced" data-difficulty="advanced">
          ğŸ”´ Advanced<br /><small>Tough Opponent</small>
        </button>
        <button class="impossible" data-difficulty="impossible">
          ğŸŸ£ Impossible<br /><small>Perfect Play</small>
        </button>
      </div>
    </div>
    <!-- Instructions Modal -->
    <div id="instructionsModal" class="modal-overlay hidden" aria-hidden="true">
      <div class="modal">
        <h2 id="instructionsTitle">How to Play SQUARE WARS</h2>
        <p id="instructionsBody"></p>
        <button data-action="close-instructions">Got it, let's play!</button>
      </div>
    </div>

    <!-- End Game Modal -->
    <div id="endGameModal" class="modal-overlay hidden" aria-hidden="true">
      <div class="modal">
        <h2 id="endGameTitle">Game Over</h2>
        <p id="endGameSubtitle">Winner: <strong>â€”</strong></p>
        <button id="tryAgainBtn" data-action="tryAgain">ğŸ”„ Try Again</button>
        <button id="changeModeBtn" data-action="changeMode">ğŸ› ï¸ Change Mode</button>
      </div>
    </div>

    <main class="app-shell" role="main">
      <h1 id="gameTitle">SQUARE WARS</h1>

      <div class="game-info">
        <div class="scores">
          <div class="score card player1" id="redScore">
            <div class="badge">ğŸ”´</div>
            <div class="labels">
              <div class="name" id="redLabel">Player 1 (Red)</div>
              <div class="hint">Territory</div>
            </div>
            <div class="value" id="redGames">0</div>
          </div>

          <div class="score card player2" id="blueScore">
            <div class="badge">ğŸ”µ</div>
            <div class="labels">
              <div class="name" id="blueLabel">Player 2 (Blue)</div>
              <div class="hint">Territory</div>
            </div>
            <div class="value" id="blueGames">0</div>
          </div>
        </div>

        <div class="score-meter" aria-label="Score balance">
          <div class="meter red" id="scoreMeterRed"></div>
          <div class="meter blue" id="scoreMeterBlue"></div>
          <div class="meter-split"></div>
        </div>

        <div class="current-player-banner" id="currentPlayerBanner">
          Current Player:
          <span id="currentPlayer" class="player1">Player 1 (Red)</span>
        </div>
      </div>

      <!-- Board -->
      <div class="grid-outer" id="gridOuter">
        <div class="grid-container" id="gridContainer">
          <div class="grid" id="gameGrid"></div>
          <div id="outlineLayer"></div>
        </div>
      </div>

      <div class="controls">
        <button>ğŸ® New Game</button>
      </div>
    </main>

    <script type="module" src="./js/script.js?v=14"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const logAction = (actionName, elementId) => {
          console.log(`Action: ${actionName}, Element: ${elementId}`);
        };

        const bindButton = (selector, handler) => {
          const elements = document.querySelectorAll(selector);
          elements.forEach((el) => {
            const wrappedHandler = (e) => {
              e.preventDefault();
              logAction(el.dataset.action || el.id, el.id || el.dataset.action);
              handler(e);
            };
            el.addEventListener("pointerup", wrappedHandler);
          });
        };

        // Bind modal buttons
        bindButton('[data-action="tryAgain"]', () => window.tryAgain());
        bindButton('[data-action="changeMode"]', () => window.changeMode());
        bindButton('[data-mode]', (e) => {
          const mode = e.target.dataset.mode;
          if (mode) window.setGameMode(mode);
        });
        bindButton('[data-scoring]', (e) => {
          const scoring = e.target.dataset.scoring;
          if (scoring) window.setScoringMode(scoring);
        });
        bindButton('[data-difficulty]', (e) => {
          const difficulty = e.target.dataset.difficulty;
          if (difficulty) window.setDifficulty(difficulty);
        });
        bindButton('[data-action="qf-start"]', () => window.confirmQuickfire());
        bindButton('[data-action="qf-cancel"]', () => window.backFromQuickfire());
      });
    </script>
  </body>
</html>





